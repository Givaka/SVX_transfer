function editAvatar(){let e=document.getElementById("canvas"),t=e.getContext("2d"),n=document.getElementById("editImage");e.width=n.width,e.height=n.height,t.width=n.width,t.height=n.height;let o,i,c,u,h=e.width,l=e.height,a=function(){let t=e.getBoundingClientRect();o=t.left,i=t.top};a(),window.onscroll=function(){a()},window.onresize=function(){a()},e.onresize=function(){a()};let d=!1,r=.96,f=parseInt(n.width*r),s={x:20,y:40,width:f,height:f,color:"red"},g=function(e,t,n){let o=n.x,i=n.x+n.width,c=n.y,u=n.y+n.height;if(e>o&&e<i&&t>c&&t<u)return!0},p=function(e){e.preventDefault(),c=parseInt(e.clientX-o),u=parseInt(e.clientY-i),g(c,u,s)&&(d=!0)},w=function(e){d&&(e.preventDefault(),d=!1)},v=function(e){d&&(e.preventDefault(),d=!1)},I=function(){if(d){event.preventDefault();let e=parseInt(event.clientX-o),t=parseInt(event.clientY-i),n=e-c,h=t-u,l=s;l.x+=n,l.y+=h,D(),c=e,u=t}};e.onmousedown=p,e.onmouseup=w,e.onmouseout=v,e.onmousemove=I;let m=function(e){e.preventDefault(),c=parseInt(e.changedTouches[0].clientX-o),u=parseInt(e.changedTouches[0].clientY-i),g(c,u,s)&&(d=!0)},y=function(e){d&&(e.preventDefault(),d=!1)},x=function(e){if(d){e.preventDefault();let t=parseInt(e.changedTouches[0].clientX-o),n=parseInt(e.changedTouches[0].clientY-i),h=t-c,l=n-u,a=s;a.x+=h,a.y+=l,D(),c=t,u=n}};e.ontouchstart=m,e.ontouchend=y,e.ontouchmove=x;let D=function(){t.clearRect(0,0,h,l),t.drawImage(n,s.x,s.y,400,400,s.x,s.y,s.width,s.height)};D()}