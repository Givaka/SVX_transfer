function editAvatar(){let e=document.getElementById("canvas"),t=e.getContext("2d"),n=document.getElementById("editImage");e.width=n.width,e.height=n.height,t.width=n.width,t.height=n.height;let i,o,c,u,h=e.width,l=e.height,a=function(){let t=e.getBoundingClientRect();i=t.left,o=t.top};a(),window.onscroll=function(){a()},window.onresize=function(){a()},e.onresize=function(){a()};let d=!1,r=parseInt(.96*n.width),f=parseInt(.5*window.innerWidth),s={x:20,y:40,width:r,height:r,color:"red"},g=function(e,t,n){let i=n.x,o=n.x+n.width,c=n.y,u=n.y+n.height;if(e>i&&e<o&&t>c&&t<u)return!0},p=function(e){e.preventDefault(),c=parseInt(e.clientX-i),u=parseInt(e.clientY-o),g(c,u,s)&&(d=!0)},w=function(e){d&&(e.preventDefault(),d=!1)},v=function(e){d&&(e.preventDefault(),d=!1)},I=function(){if(d){event.preventDefault();let e=parseInt(event.clientX-i),t=parseInt(event.clientY-o),n=e-c,h=t-u,l=s;l.x+=n,l.y+=h,D(),c=e,u=t}};e.onmousedown=p,e.onmouseup=w,e.onmouseout=v,e.onmousemove=I;let m=function(e){e.preventDefault(),c=parseInt(e.changedTouches[0].clientX-i),u=parseInt(e.changedTouches[0].clientY-o),g(c,u,s)&&(d=!0)},y=function(e){d&&(e.preventDefault(),d=!1)},x=function(e){if(d){e.preventDefault();let t=parseInt(e.changedTouches[0].clientX-i),n=parseInt(e.changedTouches[0].clientY-o),h=t-c,l=n-u,a=s;a.x+=h,a.y+=l,D(),c=t,u=n}};e.ontouchstart=m,e.ontouchend=y,e.ontouchmove=x;let D=function(){t.clearRect(0,0,h,l),console.log(f),t.drawImage(n,s.x,s.y,s.width,s.height,s.x,s.y,f,f)};D()}